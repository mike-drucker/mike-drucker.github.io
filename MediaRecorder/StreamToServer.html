<!DOCTYPE html>
<html lang=“en”>
<head>
    <meta charset=“UTF-8">
    <title>Title</title>
</head>
<body>
    <h1>helloworld3</h1>
    <script>
        var ws = new WebSocket("ws://localhost:9001/");
        // Listen for possible errors
        ws.addEventListener('error', (event) => {
          console.log('WebSocket error: ', event);
        });
        var mediaRecorder = null;
        navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
          mediaRecorder = new MediaRecorder(stream);
          mediaRecorder.addEventListener("dataavailable",event => { ws.send(new Blob([event.data], {type: 'audio/mp3'}))});
        });
        function start() {
           console.log("start");
           mediaRecorder.start(50);
        }
        function stop() {
           console.log("stop");
           mediaRecorder.stop();
        }                                               
    </script>
<button onmousedown="start()" onmouseup="stop()">Push To Talk</button>
</body>
</html>
